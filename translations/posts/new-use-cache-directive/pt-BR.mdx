export const metadata = {
  title: 'A nova diretiva `use cache`',
  description: 'O time do Next.js está trabalhando em um novo modelo de cache simples e poderoso. Neste artigo, abordaremos a nova diretiva `use cache`, estratégias de cache, e seus casos de uso.',
  publishedDate: '2025-01-26T12:00:00Z',
	timeToRead: '3min read',
	heroImage: '/posts/new-use-cache-directive.png',
  tags: ['next.js', 'react', 'caching'],
}

## Table of contents

## Uso

Lorem ipsum odor amet, consectetuer adipiscing elit. Nunc libero pretium tortor nunc lacinia viverra cras ante ullamcorper. Quisque eget inceptos natoque mi mollis integer eu mi.

```jsx
// next.config.js
import type { NextConfig } from 'next'
 
const nextConfig: NextConfig = {
  experimental: {
    useCache: true,
  },
}
 
export default nextConfig
```

Quam pulvinar nulla congue habitant fringilla sed eu sapien. Auctor gravida accumsan quis cubilia condimentum habitasse libero. Eget elementum volutpat libero habitant tortor malesuada habitant blandit.

```jsx
// File level
'use cache'
 
export default async function Page() {
  // ...
}
 
// Component level
export async function MyComponent() {
  'use cache'
  return <></>
}
 
// Function level
export async function getData() {
  'use cache'
  const data = await fetch('/api/data')
  return data
}
```

## Exemplos

Lorem ipsum odor amet, consectetuer adipiscing elit. Nunc libero pretium tortor nunc lacinia viverra cras ante ullamcorper. Quisque eget inceptos natoque mi mollis integer eu mi.

Quam pulvinar nulla congue habitant fringilla sed eu sapien. Auctor gravida accumsan quis cubilia condimentum habitasse libero. Eget elementum volutpat libero habitant tortor malesuada habitant blandit.

### Rotas inteiras

Lorem ipsum odor amet, consectetuer adipiscing elit. Nunc libero pretium tortor nunc lacinia viverra cras ante ullamcorper. Quisque eget inceptos natoque mi mollis integer eu mi.

```jsx
// app/layout.tsx
'use cache'

import { unstable_cacheLife as cacheLife } from 'next/cache'
 
export default function Layout({ children }: { children: ReactNode }) {
  return <div>{children}</div>
}
```

### Componentes

Lorem ipsum odor amet, consectetuer adipiscing elit. Nunc libero pretium tortor nunc lacinia viverra cras ante ullamcorper. Quisque eget inceptos natoque mi mollis integer eu mi.

Quam pulvinar nulla congue habitant fringilla sed eu sapien. Auctor gravida accumsan quis cubilia condimentum habitasse libero. Eget elementum volutpat libero habitant tortor malesuada habitant blandit.

```jsx
// app/components/bookings.tsx
export async function Bookings({ type = 'haircut' }: BookingsProps) {
  'use cache'
  async function getBookingsData() {
    const data = await fetch(`/api/bookings?type=${encodeURIComponent(type)}`)
    return data
  }
  return //...
}
 
interface BookingsProps {
  type: string
}
```

### Funções

Lorem ipsum odor amet, consectetuer adipiscing elit. Nunc libero pretium tortor nunc lacinia viverra cras ante ullamcorper. Quisque eget inceptos natoque mi mollis integer eu mi.

Quam pulvinar nulla congue habitant fringilla sed eu sapien. Auctor gravida accumsan quis cubilia condimentum habitasse libero. Eget elementum volutpat libero habitant tortor malesuada habitant blandit.

```jsx
// app/actions.ts
export async function getData() {
  'use cache'
 
  const data = await fetch('/api/data')
  return data
}
```

## Conclusão

Lorem ipsum odor amet, consectetuer adipiscing elit. Nunc libero pretium tortor nunc lacinia viverra cras ante ullamcorper. Quisque eget inceptos natoque mi mollis integer eu mi.

Quam pulvinar nulla congue habitant fringilla sed eu sapien. Auctor gravida accumsan quis cubilia condimentum habitasse libero. Eget elementum volutpat libero habitant tortor malesuada habitant blandit.

Auctor venenatis diam vitae sagittis ornare neque torquent. Habitant lacus aptent a tellus, dignissim ex. Fames tempor nostra duis justo quam aliquet varius.